<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html>
<head>
<title>ArcEm 1.00 Manual</title>
<link rel="icon" type="image/png" href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAIAAACQkWg2AAACNklEQVQoz1VSy4vNcRw95/P93XHneo1GWU0oWZiIEiUpa2aBheSxQNEsZhbI2MmWpYV/wMLKws5GUdY0SihpYsGIO/f3+75fFuOROp3O4pyzOYcnLr0qlQBIIUnKfwICiggBIWVsrN+kXPdND0ARSgUB1IJaUWqtFSXzyIF1Rw8Prt8ZDYfKZNsAAAW1ppxiTDGlnCRnlZLKWe3YNn5wZwTwYQkietAvQopQcinGGK2d1rXr0Gm0LXqqd/XsoLtwmiQA4EcupSGkgsFH54rzKkYVI1IEILcWNpqbN7i4+CcwqnW9UAQVPmTvlbNKa2itOq3mLk+Ov3iqHj3sd11KCVhBXqm1NqSUUoNXxsJaeK9CVqdmJvas/cbZi9A6ltK2rYgOI9P0akNKStl55SysgYPaOz1+5ewkZXNYXjajYXjyWLct0IUQB2RDSErVGGUtHLBl85rb85vy+4X485lv3/j+Vrt7VmsN6JQSgAZkTKI1PNFrcOfahPp233y564FA+JV39uu8mXpJ71LKBBtSrBVbQGL2/IaJsUX3aSEIQoAPCB7OQ2sdQsw5g2wAGY0UiaOHevt3/cxLx02A9wjhH4wxztlaAUpDSjdS26fKmWMufT6pu+Hf7pQQI7yHtdb7AJBAAwr7mLvg2s/3yvC184gBMWF1vpgQA4wxKWWApDQkz88sfXz7fKx9EBNyQs7IGaX85lIQY1x1k8Jzc8vDle+oodYKAMTq1QEQAgIQsqnsCWVi4+QvcYtxGTTYxHsAAAAASUVORK5CYII=">
<style type="text/css">
html {
	margin: 0;
	padding: 0;
	background: #c0c0c0;
}

body {
	width: 70%;
	min-width: 480px;
	max-width: 1200px;
	margin: 0 auto;
	padding: 1em 1em 3em 1em;
	background: #d4d4d4;
	border-left: solid #aaaaaa 1em;
	border-right: solid #aaaaaa 1em;
}

ul {
	margin-top: 1em;
	margin-bottom: 1em;
}

ul ul, ol ul {
	margin-top: 0;
	margin-bottom: 0;
}

th, td {
	background: #eeeeee;
}

pre {
	padding: 0.5em;
	border: inset #d5d5d5 2px;
}

p#version {
	display: table;
	width: 100%;
	border-top: 2px solid #999999;
	border-bottom: 2px solid #999999;
	padding: 1px;
	background: #bbbbbb;
	white-space: nowrap;
}

p#version a {
	text-align: right;
	display: table-cell;
}

h2 {
	margin-top: 2em;
	border-top: 2px solid #bbbbbb;
	padding-top: 0.25em;
}

h2#contents {
	margin-top: 2em;
	border-top: none;
	padding-top: 0;
}

.todo {
	color: red;
}
</style>
</head>
<body>

<h1>ArcEm &ndash; The Acorn Archimedes Emulator</h1>

<p id="version">ArcEm 1.00 Manual <a href="http://arcem.sf.net/">http://arcem.sf.net/</a></p>


<h2 id="contents">Contents</h2>

<ul>
<li><a href="#install">Installing ArcEm</a></li>
<li><a href="#compiling">Compiling ArcEm</a></li>
<li><a href="#using">Using ArcEm</a>
<ul>
<li><a href="#romimages">ROM Images</a></li>
<li><a href="#mouseinput">Mouse Input</a></li>
<li><a href="#floppies">Using floppies</a></li>
<li><a href="#HDimages">Using HD images</a></li>
<li><a href="#arcemrc">arcemrc file</a></li>
</ul>
</li>
<li><a href="#issues">Known Issues and bugs</a>
<ul>
<li><a href="#knownall">All platforms</a></li>
<li><a href="#knownX">Unix/X Windows</a></li>
<li><a href="#knownWIN32">Microsoft Windows</a></li>
<li><a href="#knownRO">RISC OS</a></li>
</ul>
</li>
</ul>


<h2 id="install">Installation</h2>

<p>Follow the instructions appropriate for your system:</p>
<dl>
<dt>Unix/X Windows</dt>
<dd>
<p>Download the src archive and follow the compilation instructions below.  Once compiled copy the arcemrc file to your home directory as .arcemrc.  When run there is some output on the console.</p>
</dd>
<dt>Microsoft Windows</dt>
<dd>
<p>Extract the archive and supply a ROM image, the program is called ArcEm.exe. Create a shortcut to this file if you want to add it to your start menu or desktop.</p>
</dd>
<dt>RISC OS</dt>
<dd>
<p>Please see the !Help file within the !ArcEm application for usage information.</p>
</dd>
</dl>
<p><strong>Note:</strong> Once installed all versions require a <a href="#romimages">ROM image</a> file.</p>


<h2 id="compiling">Compiling ArcEm</h2>

<p>Follow the instructions appropriate for your system:</p>
<dl>
<dt>Unix/X Windows</dt>
<dd>
<p>The X windows version compiles up using the 'Makefile' contained in the root of the source package. If you have a big endian processor, such as Sparc or PowerPC edit the Makefile to add the -DHOST_BIGENDIAN flag to the CFLAGS field.</p>
<pre>$ make</pre>
</dd>
<dt>Microsoft Windows</dt>
<dd>
<p>ArcEm will build under <a href="http://sources.redhat.com/cygwin/">Cygwin</a>.  It builds a version which is independent of Cygwin (unlike the previous version of ArcEm for Windows), so you will also need to ensure you have mingw-runtime library installed (from Cygwin setup). Use the following command:</p>
<pre>$ make SYSTEM=win</pre>
<p>Additionally, ArcEm will build in Microsoft Visual C 6. Project files are  provided for this in the 'vc' directory.</p>
</dd>
<dt>RISC OS</dt>
<dd>
<p>ArcEm builds with GCC. You should use the following command:</p>
<pre>*make SYSTEM=riscos-single</pre>
<p>It is possible to build with Leo White's RiscXLib if you really want to make an X Windows version under RISC&nbsp;OS, but that is beyond the scope of this guide. Finally, it is also possible to cross compile it using <a href="http://hard-mofo.dsvr.net/gcc/">GCCSDK</a>.  e.g.:</p>
<pre>$ CC=/home/riscos/cross/bin/gcc make SYSTEM=riscos-single</pre>
<p>The desktop version of ArcEm has not been developed yet, and will not build.</p>
</dd>
</dl>


<h2 id="using">Using ArcEm</h2>

<h3 id="romimages">ROM images</h3>

<p>As ArcEm is only a hardware emulator to make it do anything useful you need an operating system ROM. ArcEm has been tested with and is known to work with ARM Linux, RISC OS 3.10, RISC OS 3.11 and RISC OS 3.19. ARM Linux ROMs are freely available, check the website. RISC OS 3.1x ROMs can be extracted from a real Acorn machine using the following commands on RISC OS.</p>
<pre>
*save :0.$.ROM1 3800000 3880000
*save :0.$.ROM2 3880000 3900000
*save :0.$.ROM3 3900000 3980000
*save :0.$.ROM4 3980000 3a00000
</pre>
<p>Copy these files to your host operating system, RISC OS 3.1x supports DOS formatted floppy discs so you can use them to transfer the files. ArcEm needs the ROM file to be in one part (rather than the four you just created) so join them back together using the appropriate command for your system:</p>
<dl>
<dt>Unix/XWindows</dt>
<dd>
<p>From a shell prompt:</p>
<pre>$ cat ROM1 ROM2 ROM3 ROM4 &gt; ROM</pre>
</dd>
<dt>Windows</dt>
<dd>
<p>From a cmd.exe command prompt:</p>
<pre>copy /b ROM1+ROM2+ROM3+ROM4 ROM</pre>
</dd>
<dt>RISC OS</dt>
<dd>
<p>From the command line:</p>
<pre>
*print ROM1 { &gt; ROM }
*print ROM2 { &gt;&gt; ROM }
*print ROM3 { &gt;&gt; ROM }
*print ROM4 { &gt;&gt; ROM }
</pre>
</dd>
</dl>

<h4>Alternate sources of ROM images</h4>
<p>You can download a copy of the RISC OS 3.10 ROM image as a support file from the <a href="http://home.tiscali.nl/~jandboer/">!A310emu website</a>, it's in the file <a href="http://home.tiscali.nl/~jandboer/support2.zip">support2.zip</a> and is called ro310, you should rename ro310 to ROM before using it with ArcEm.  Another good source is the <a href="http://www.4corn.co.uk/archive.php">4corn Archive</a>.</p>


<h3 id="mouseinput">Mouse Input</h3>

<p>Some of the platforms require specific instructions to let you move the mouse around.</p>
<dl>
<dt>Unix/X Windows</dt>
<dd>
<p>Whilst the Main display window has the focus, press the + key on the numeric keypad to 'capture' the mouse. To 'free' the mouse again for use with the rest of your X desktop press numeric keypad + again.</p>
</dd>
<dt>Windows</dt>
<dd>
<p>Although there is some mouse movement when you move the cursor over the display window, you can use the Unix/XWindows style numeric keypad + toggle to 'capture' and 'free' the mouse for better performance. Currently mouse handling on the Windows build is very poor.</p>
</dd>
<dt>RISC OS</dt>
<dd>
<p>The RISC OS version runs full-screen and captures all mouse input until you quit the program. Pressing the Escape key will quit ArcEm.</p>
</dd>
</dl>


<h3 id="floppies">Using floppies</h3>

<p>All the platforms support using .adf format floppy disc images. A disc image is a binary dump of the contents of a floppy disc. ArcEm has no support for directly using the host computers real floppy disc drive.</p>
<p>The basic support for floppy discs is to allow you to have the following floppy disc images in the current working directory of the ArcEm executable:</p>
<ul>
<li>FloppyImage0</li>
<li>FloppyImage1</li>
<li>FloppyImage2</li>
<li>FloppyImage3</li>
</ul>
<p>These are then available under RISC OS as the four disc drives ADFS:0 to ADFS:3.  On Linux they are accessible as <span class="todo">TODO</span>.</p>
<p>Some platforms provide extra support for using floppy discs:</p>
<dl>
<dt>Unix/XWindows</dt>
<dd>
<p>Whilst the control pane window has the focus, pressing 0, 1, 2 or 3 will eject/insert floppy disc images, those images still have to be named as above, but with moving of images around you should be able to change discs at run time.</p>
</dd>
</dl>


<h3 id="HDimages">Using HD images</h3>

<p>ArcEm supports up to four Harddiscs, hard disc images are binary files that represent a hard drive's contents. ArcEm support the ST506 disc interface from Archimedes computers allowing it to support drives up to 64MB in size. Hard drive images should be placed in the current working directory of ArcEm and be named:</p>
<ul>
<li>HardImage0</li>
<li>HardImage1</li>
<li>HardImage2</li>
<li>HardImage3</li>
</ul>
<p>You also need to specify the hard drive &quot;shape&quot; in the arcemrc config file. The &quot;shape&quot; lists the number of Heads, Cylinders, Sectors and the Record Size, these four numbers multiplied together are equal to the size in bytes of the hard drive image.</p>
<p>When emulating RISC OS, you will also need to use the !Configure application to set the number of hard drives within the OS.</p>


<h3 id="arcemrc">arcemrc file</h3>

<p>The arcemrc files stores information about the number and 'shape' of harddisc's attached to the emulated machine. Here is an example arcemrc:</p>
<pre>
MFM disc
1 1024 8 32 256
MFM disc
2 612 4 32 256
</pre>
<p>The five numbers represent the following:</p>
<ol>
<li>Hard drive number: 0 to 3 inclusive.</li>
<li>Number of Cylinders: 1 to 1024 inclusive.</li>
<li>Number of Heads: 1 to 256 inclusive.</li>
<li>Number of Sectors per track: 1 to 256 inclusive.</li>
<li>Sector Length: 256, 512, 1024, 2048, or 4096.</li>
</ol>
<p>For the premade hard drive images available on the website the shape information should be available. For your own harddiscs that you have imaged you should check the Harddrive itself, as the number of cylinders, sectors and heads is normally printed on it.</p>


<h2 id="issues">Known Issues and bugs</h2>

<h3 id="knownall">All platforms</h3>

<ul>
<li>There is no support for emulating 256K/512K/1MB RAM machines.</li>
<li>2MB RAM support incorrectly has a 32KB page size set, real machines have a 16KB page size, RISC OS copes with this and boots as normal.</li>
<li>All interlaced modes are displayed at their logical resolution, this means displays in some modes appear to be half the height they would appear on real monitors.</li>
</ul>


<h3 id="knownX">Unix/X Windows</h3>

<ul>
<li>The display window doesn't resize on mode changes and remains at 800x600.</li>
</ul>


<h3 id="knownWIN32">Microsoft Windows</h3>

<ul>
<li>The version 1.00 binary is very unstable and crashes regularly.</li>
<li>The only menu items that do anything are Quit and About.</li>
<li>The mouse handling is very poor.</li>
<li>The Windows version has no diagnostics if anything goes wrong and will quite without warning (unless you rebuild with a console).</li>
<li>ARM Linux does not currently work in the Windows version of the emulator. There is an unknown issue with harddrive access.</li>
</ul>


<h3 id="knownRO">RISC OS</h3>

<ul>
<li>The RISC OS version is very slow.</li>
</ul>

</body>
</html>
